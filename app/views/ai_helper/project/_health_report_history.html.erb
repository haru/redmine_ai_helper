<div class="ai-helper-health-report-history">
  <h4><%= l(:label_ai_helper_health_report_history) %></h4>

  <% if @health_reports.any? %>
    <table class="list">
      <thead>
        <tr>
          <th><%= l(:field_created_on) %></th>
          <th><%= l(:label_ai_helper_report_period) %></th>
          <th><%= l(:field_author) %></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @health_reports.each do |report| %>
          <tr class="<%= cycle('odd', 'even') %>">
            <td class="created_on">
              <%= link_to format_time(report.created_at),
                          ai_helper_health_report_show_path(@project, report_id: report.id) %>
            </td>
            <td class="period">
              <%= report.period_string %>
            </td>
            <td class="author">
              <%= link_to_user report.user %>
            </td>
            <td class="buttons">
              <%= link_to l(:button_view),
                          ai_helper_health_report_show_path(@project, report_id: report.id),
                          class: 'icon icon-magnifier' %>
              <%= link_to 'PDF',
                          ai_helper_health_report_show_path(@project, report_id: report.id, format: :pdf),
                          class: 'icon icon-pdf' %>
              <% if report.deletable? %>
                <%= link_to l(:button_delete),
                            ai_helper_health_report_destroy_path(@project, report_id: report.id),
                            method: :delete,
                            data: { confirm: l(:text_are_you_sure) },
                            class: 'icon icon-del' %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <span class="pagination"><%= pagination_links_full @health_report_pages, @health_report_count %></span>
  <% else %>
    <p class="nodata"><%= l(:label_no_data) %></p>
  <% end %>
</div>
