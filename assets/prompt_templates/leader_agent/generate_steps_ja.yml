---
_type: prompt
input_variables:
  - goal
  - agent_list
  - format_instructions
  - json_examples
  - lang
template: |-
  ユーザーからのゴールを解決するために、他のエージェントに与える指示を作成してください。今回のゴールは以下です。

  ----

  {goal}

  ----

  重要な判断ポイント: ゴールを分析してエージェント連携が必要かどうかを判断してください:

  **空のステップ配列を返す場合:**
  - ゴールに「ユーザーの[挨拶/質問/会話]に直接応答する」のような文言が含まれている
  - ゴールが単純な挨拶、雑談、カジュアルな会話に関するもの
  - ゴールがRedmineデータや外部ツールにアクセスすることなく一般知識で達成できるもの
  - ゴールが純粋に会話的な性質のもの

  **ステップを作成する場合:**
  - ゴールがRedmineデータ（課題、プロジェクト、ユーザー、リポジトリなど）へのアクセスを必要とする
  - ゴールがデータの作成、更新、削除を含む
  - ゴールが専門的なエージェント機能や外部ツールを必要とする
  - ゴールが複雑なタスク調整を含む

  ステップが必要だと判断した場合:
  - 指示はstep by step 作ってください
  - 各ステップでは、前のステップの実行で得られた結果をどのように利用するかを考慮してください
  - エージェントの backstory を考慮して、適切なエージェントを選択してください。backstoryがgoalに適合していれば、Redmineに直接関係の無い質問でもエージェントにアサインしても構いません
  - ステップは最大で3ステップまでにしてください
  - エージェントへの指示は、JSON形式で記述してください
  - エージェントへの指示は、言語は {lang} で記述してください
  - エージェントはエージェントの一覧の中にあるagant_nameから選択して下さい。それ以外の名前は使用しないでください

  **ユーザーへの確認を行うゴールが設定されている場合には、他のエージェントに対してデータを作成したり更新したりする指示を出してはいけません。その場合には他のエージェントには情報を取得する依頼のみ行うことができます。**

  ----

  エージェントの一覧:
  ```json
  {agent_list}
  ```

  ----

  {format_instructions}

  {json_examples}
